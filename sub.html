<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- slick css CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />
    <!-- slick css CDN (í…Œë§ˆ) -->
    <link
      rel="stylesheet"
      type="text/css"
      href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"
    />
    <!-- jQuery CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- slick js CDN -->
    <link
      rel="stylesheet"
      type="text/css"
      href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"
    />
    <!-- CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- sub css -->
    <link rel="stylesheet" href="/sub.css" />
    <!-- slick slider -->
    <script
      type="text/javascript"
      src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"
    ></script>
    <!-- Moment.js CDN - ë‹¬ë ¥ -->
    <script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>

    <!-- Date Range Picker CSS CDN - ë‹¬ë ¥-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"
    />

    <!-- sub.js -->
    <script type="module" src="sub.js"></script>

    <title>EchoTrip</title>

    <script>
      $(function () {
        // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„°
        const jsonString = localStorage.getItem("house-info");
        // JSON íŒŒì‹±í•˜ì—¬ ê°ì²´ ë°°ì—´ë¡œ ë³€í™˜
        const dataList = JSON.parse(jsonString);
        // console.log(dataList);
        let priceToNum = Number(dataList.price.replace(/,/g, ""));

        // ìƒì„¸í˜ì´ì§€ ì •ë³´
        // TODO
        // ìˆ™ì†Œ ì‘ì€ ì´ë¯¸ì§€
        $.each(dataList.imageSubUrl, (index, value) => {
          $(`.sm-img-${index + 1}`).css("background-image", `url(${value})`);
          $(`#modal-img-${index + 1}`).css("background-image", `url(${value})`);
        });
        $("#gh-title").html(dataList.name); // ìˆ™ì†Œ íƒ€ì´í‹€
        $("#gh-rating").html(dataList.rate); // í‰ì 
        $("#description").html(dataList.description); // ìˆ™ì†Œ ì„¤ëª…
        $("#day-price").html(dataList.price); // ìˆ™ì†Œ ê°€ê²©(1ë°•)
        $("#charge").html(
          "â‚© " + (priceToNum - priceToNum * 0.9).toLocaleString()
        ); // ì„œë¹„ìŠ¤ ìˆ˜ìˆ˜ë£Œ
        $("#total-price").html(
          "â‚©" + (priceToNum + priceToNum * 0.1).toLocaleString()
        ); // ì´ í•©ê³„ ê°€ê²©
        // ì§€ë„ ì •ë³´
        let location =
          dataList.location[0] + dataList.location[1] + dataList.location[2];
        $(".location-name").html(location); // ì£¼ì†Œëª…
        $("#map-iframe").attr("src", dataList.location[3]); // ì£¼ì†Œ url

        // ë¦¬ë·° ëª¨ë‹¬ì°½
        $(".more-button").on("click", function () {
          $(".modalBackground").css("display", "block");
          $("body").addClass("no-scroll");
        });
        // ëª¨ë‹¬ì°½ ë‹«ê¸°ë²„íŠ¼
        $(".closeButton").on("click", function () {
          console.log("ëª¨ë‹¬ ë‹«ê¸° í´ë¦­");
          $(".modalBackground").css("display", "none");
          $("body").removeClass("no-scroll");
        });
      });
    </script>
  </head>

  <body>
    <video autoplay muted loop>
      <source src="./videos/background-video.mp4" />
    </video>

    <!-- í—¤ë” -->
    <div class="header-section">
      <div class="header-content">
        <span>ECH</span
        ><span><img src="./images/echotrip-logo.png" alt="logo" /></span
        ><span>TRIP</span>
      </div>
    </div>

    <!-- TODO ìŠ¤í¬ë¡¤ì‹œ ë³´ì„ ìœ ë¬´ ì ìš© -->
    <div class="reserv-header-container">
      <div class="reserv-header-content">ì˜ˆì•½í•˜ê¸° ë²„íŠ¼</div>
    </div>

    <div class="wrapper">
      <!-- í˜ì´ì§€ ë‚´ìš© ì»¨í…Œì´ë„ˆ -->
      <div class="container-fluid">
        <!-- ìˆ™ì†Œ ì •ë³´ -->
        <div class="content">
          <!-- ìˆ™ì†Œëª…-->
          <div class="gh-title">
            <p id="gh-title"></p>
          </div>

          <!-- ìˆ™ì†Œ ì´ë¯¸ì§€ ì˜ì—­ -->
          <div class="img-container">
            <!-- ì™¼ìª½ ì˜ì—­ (í°ê·¸ë¦¼) -->
            <div
              class="img-el img-left-section"
              style="
                background-image: url('https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6MTEzMTA4MzUyMzk5Mjc3MDU5Nw%3D%3D/original/ced15ffe-0ab5-48cf-a189-dbdeaaf04387.jpeg?im_w=2560&im_q=highq');
              "
            ></div>

            <!-- ì¤‘ê°„ ì˜ì—­ (ì‘ì€ ì´ë¯¸ì§€ 2ê°œ) -->
            <div class="img-middle-section">
              <div class="img-el small-img sm-img-1"></div>
              <div
                class="img-el small-img sm-img-2"
                style="
                  background-image: url(https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6MTEzMTA4MzUyMzk5Mjc3MDU5Nw%3D%3D/original/0caa1462-bd5f-4cfa-8f9d-7012f7eb7d02.jpeg?im_w=1440&im_q=highq);
                "
              ></div>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ì˜ì—­ (ì‘ì€ ì´ë¯¸ì§€ 2ê°œ) -->
            <div class="img img-right-section">
              <div
                class="img-el small-img sm-img-3"
                style="
                  background-image: url(https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6MTEzMTA4MzUyMzk5Mjc3MDU5Nw%3D%3D/original/dcb25748-642f-4314-9815-acaba652ca1e.jpeg?im_w=1440&im_q=highq);
                "
              ></div>
              <div
                class="img-el small-img sm-img-4"
                style="
                  background-image: url(https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6MTEzMTA4MzUyMzk5Mjc3MDU5Nw%3D%3D/original/d25d568a-7cd3-460b-accc-94c6d71ccbde.jpeg?im_w=1440&im_q=highq);
                "
              ></div>
            </div>
          </div>

          <!-- ìˆ™ì†Œ ìƒì„¸ì •ë³´ ì˜ì—­ -->
          <div class="gh-details">
            <!-- ì™¼ìª½ ì˜ì—­ -->
            <div class="gh-details-left">
              <!-- ìˆ™ì†Œ ìœ„ì¹˜, ë³„ì , í‰ê°€ ë¬¸êµ¬ -->
              <div class="overview">
                <div class="overview-left">
                  <p class="gh-location">ë¼ìŠ¤ë² ì´ê±°ìŠ¤, ë„¤ë°”ë‹¤, ë¯¸êµ­</p>
                  <p class="gh-rating">â˜… <span id="gh-rating"></span></p>
                  <!-- íŒë§¤ì ì†Œê°œ -->
                  <div class="host-info">
                    <div
                      class="host-img"
                      style="
                        background-image: url('https://a0.muscache.com/im/pictures/user/User-571407812/original/d3298ae6-1ea8-494c-a001-d00e59ed0935.jpeg?im_w=240');
                      "
                    ></div>
                    <div class="host-description">
                      <div class="host-name">Doja Cat ë‹˜</div>
                      <div class="host intro">
                        ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” í”„ë‘ìŠ¤ì˜ ë‹¤í•™ì œ ë””ìì´ë„ˆì¸ Mathieu
                        Lehanneurì…ë‹ˆë‹¤.
                      </div>
                    </div>
                  </div>
                  <div class="hr"></div>

                  <!-- ìˆ™ì†Œ ìƒì„¸ ì„¤ëª…  -->
                  <div class="gh-description">
                    <p id="description"></p>
                    <!-- TODO -->
                    <!-- í¸ì˜ì‹œì„¤ -->
                    <p class="sub-title">[í¸ì˜ì‹œì„¤]</p>
                    <div class="amenities">
                      ğŸ” ì¡°ì‹ì„ ì œê³µí•´ìš”! &nbsp;&nbsp; ğŸ¶ ë™ë¬¼ ì¹œêµ¬ ì…ì¥ì´
                      ê°€ëŠ¥í•´ìš”! &nbsp;&nbsp; ğŸš— ì£¼ì°¨ê°€ëŠ¥
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ì˜ì—­ -->
            <div class="gh-details-right">
              <!-- ê°€ê²© ì •ë³´ í‘œì‹œ, ë§¤ì§„ì¼ ê²½ìš° ë§¤ì§„ìœ¼ë¡œ í‘œì‹œ -->
              <div class="reserv-container">
                <!-- êµ¬ë§¤ ê°€ëŠ¥í•œ ê²½ìš° ë³´ì„ -->
                <div class="available">
                  <div class="price-title">
                    <span>â‚© <span id="day-price"></span></span>
                    <span style="font-size: 16px">&nbsp;/&nbsp;ë°•</span>
                  </div>
                  <!-- TODO ë‚ ì§œì„ íƒ , ì¸ì›ìˆ˜ ì„ íƒ -->
                  <div class="select-section">
                    <p style="font-size: 18px">ë‚ ì§œ ì„ íƒ</p>
                    <input
                      type="text"
                      name="daterange"
                      id="daterange"
                      placeholder="ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”"
                      style="border: 1px solid gray"
                    />

                    <p style="font-size: 18px">ì¸ì› ì„ íƒ</p>
                  </div>
                  <!-- ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ -->
                  <div class="reserv-button">ì˜ˆì•½í•˜ê¸°</div>
                  <p
                    style="
                      text-align: center;
                      margin-top: 20px;
                      font-size: 16px;
                    "
                  >
                    ì˜ˆì•½ í™•ì • ì „ì—ëŠ” ìš”ê¸ˆì´ ì²­êµ¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                  </p>
                  <!-- TODO -->
                  <div class="fee-info">
                    <p>ì—ì½”íŠ¸ë¦½ ì„œë¹„ìŠ¤ ìˆ˜ìˆ˜ë£Œ</p>
                    <p><span id="charge"></span></p>
                  </div>

                  <div class="hr"></div>
                  <div
                    class="total-price"
                    style="
                      display: flex;
                      justify-content: space-between;
                      font-size: 26px;
                    "
                  >
                    <p>ì´ í•©ê³„</p>
                    <p id="total-price"></p>
                  </div>
                </div>
                <!-- ë§¤ì§„ëœ ê²½ìš° í‘œì‹œ -->
                <div class="sold-out">
                  <div class="sold-out-title">
                    í•´ë‹¹ ìˆ™ì†ŒëŠ” ì˜ˆì•½ ë§ˆê° ë˜ì—ˆìŠµë‹ˆë‹¤
                  </div>
                  <div class="sold-out-button">ì˜ˆì•½ ê°€ëŠ¥ ì‹œ ì•Œë¦¼ë°›ê¸°</div>
                </div>
              </div>
            </div>

            <!-- ìˆ™ì†Œ ë¦¬ë·° ëª¨ë‹¬ì°½ -->
            <div class="modalBackground">
              <div class="modalContainer">
                <div class="closeButton" onclick="close()">X</div>
                <div class="modalContent">
                  <ul class="all-review-ul">
                    <!-- ë¦¬ë·° ëª¨ë‹¬ì°½ -->
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- ì°¨íŠ¸ -->
          <!-- TODO -->
          <section class="chart-section">
            <div class="chart-left">
              <span>ë‚˜ë¼ë³„ ì˜ˆì•½ìœ¨</span>
              <div class="chart-bar">
                <canvas id="chart-bar-view"></canvas>
              </div>
            </div>

            <div class="chart-right">
              <span>ë‚¨ë…€ ìˆ™ì†Œ ì„ í˜¸ë„</span>
              <div class="chart-pie">
                <canvas id="chart-pie-view"></canvas>
              </div>
            </div>
          </section>

          <!-- ë¦¬ë·° -->
          <section class="review-section">
            <h3>ë¦¬ë·°</h3>
            <div class="hr"></div>
            <ul class="review-ul">
              <!-- ë¦¬ë·°ì‘ì„±ì í”„ë¡œí•„ ì‚¬ì§„, ì´ë¦„, ë³„ì , ë¦¬ë·° ë‚´ìš© -->
            </ul>
            <div class="more-button">í›„ê¸° 14ê°œ ëª¨ë‘ ë³´ê¸°</div>
          </section>

          <!-- ì§€ë„ (iframe) -->
          <section class="gh-map-section">
            <h2 class="gh-map-title">ìœ„ì¹˜</h2>
            <p class="location-name">ë¼ìŠ¤ë² ì´ê±°ìŠ¤, ë„¤ë°”ë‹¤, ë¯¸êµ­</p>
            <div class="map">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d412505.9198529579!2d-115.50395679329398!3d36.1251050251558!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80beb782a4f57dd1%3A0x3accd5e6d5b379a3!2z66-46rWtIOuEpOuwlOuLpCDrnbzsiqTrsqDsnbTqsbDsiqQ!5e0!3m2!1sko!2skr!4v1724321746938!5m2!1sko!2skr"
                width="100%"
                height="100%"
                style="border: 0"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                id="map-iframe"
              ></iframe>
            </div>
            <!-- TODO -->
            <p class="location-info-title">ì§€ì—­ì •ë³´</p>
            <p class="location-info">
              VagiaëŠ” ì„¸ë¦¬í¬ìŠ¤ í•­êµ¬ì—ì„œ ë¶ˆê³¼ 8km ê±°ë¦¬ì— ìˆìŠµë‹ˆë‹¤. ì¹¸í‹°ë‚˜ëŠ” í•´ë³€
              ë°”ë¡œ ì•ì˜ ì¼ëª°ê¹Œì§€ ì˜¤ì „ 10ì‹œë¶€í„° ì¼ëª°ê¹Œì§€ ìš´ì˜ë˜ë©°, ì¸ê·¼ í˜¸í…”ì—ëŠ”
              ê³ ê¸‰ ë ˆìŠ¤í† ë‘ì´ ìˆìŠµë‹ˆë‹¤.
            </p>
          </section>
        </div>
      </div>

      <!-- Footer -->
      <footer>
        <div class="container">
          <!-- ìƒë‹¨ ì„¹ì…˜: ì •ë³´ ë° ë§í¬ -->
          <div class="row">
            <!-- íšŒì‚¬ ì •ë³´ -->
            <div class="col-md-3">
              <h5>About Us</h5>
              <p>
                We offer the best selection of guesthouses from around the
                world, connecting travelers with unique and affordable
                accommodation options.
              </p>
            </div>

            <!-- ë¹ ë¥¸ ë§í¬ -->
            <div class="col-md-3">
              <h5>Quick Links</h5>
              <ul class="list-unstyled">
                <li><a href="#">Home</a></li>
                <li><a href="#">Destinations</a></li>
                <li><a href="#">Guesthouses</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Contact Us</a></li>
              </ul>
            </div>

            <!-- ê³ ê° ì§€ì› -->
            <div class="col-md-3">
              <h5>Customer Support</h5>
              <ul class="list-unstyled">
                <li><a href="#">FAQ</a></li>
                <li><a href="#">Help Center</a></li>
                <li><a href="#">Cancellation Policy</a></li>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Terms & Conditions</a></li>
              </ul>
            </div>

            <!-- ì†Œì…œ ë¯¸ë””ì–´ -->
            <div class="col-md-3">
              <h5>Follow Us</h5>
              <ul class="list-unstyled d-flex">
                <li>
                  <a href="#" class="mr-2"
                    ><img
                      src="https://img.icons8.com/fluent/24/000000/facebook-new.png"
                      alt="Facebook"
                  /></a>
                </li>
                <li>
                  <a href="#" class="mr-2"
                    ><img
                      src="https://img.icons8.com/fluent/24/000000/instagram-new.png"
                      alt="Instagram"
                  /></a>
                </li>
                <li>
                  <a href="#" class="mr-2"
                    ><img
                      src="https://img.icons8.com/fluent/24/000000/twitter.png"
                      alt="Twitter"
                  /></a>
                </li>
                <li>
                  <a href="#"
                    ><img
                      src="https://img.icons8.com/fluent/24/000000/youtube-play.png"
                      alt="YouTube"
                  /></a>
                </li>
              </ul>
            </div>
          </div>

          <!-- í•˜ë‹¨ ì„¹ì…˜: ì €ì‘ê¶Œ ë° ê¸°íƒ€ ì •ë³´ -->
          <div class="row mt-4">
            <div class="col text-center">
              <p>&copy; 2024 Guesthouse Explorer. All rights reserved.</p>
              <p>
                <a href="#">Terms of Use</a> | <a href="#">Privacy Policy</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Date Range Picker JavaScript CDN -->
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script type="text/javascript">
      $(function () {
        $("#daterange").daterangepicker(
          {
            opens: "left",
            locale: {
              format: "YYYY-MM-DD",
            },
          },
          function (start, end, label) {
            console.log(
              "A new date selection was made: " +
                start.format("YYYY-MM-DD") +
                " to " +
                end.format("YYYY-MM-DD")
            );
          }
        );
      });

      // 1. ë§‰ëŒ€ì°¨íŠ¸ : ìˆ™ì†Œ ì¬ë°©ë¬¸ìœ¨
      const ctx = document.querySelector("#chart-bar-view");
      new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["ëŒ€í•œë¯¼êµ­", "ë¯¸êµ­", "ì¤‘êµ­", "í”„ë‘ìŠ¤", "ì˜êµ­"],
          datasets: [
            {
              // label: "",
              data: [120, 300, 270, 80, 170],
              // ê° ë‚˜ë¼ë³„ ë§‰ëŒ€ì˜ ìƒ‰ìƒ ì§€ì •
              backgroundColor: [
                "#ff6384", // ëŒ€í•œë¯¼êµ­
                "#36a2eb", // ë¯¸êµ­
                "#ffcd56", // ì¤‘êµ­
                "#4bc0c0", // í”„ë‘ìŠ¤
                "#9966ff", // ì˜êµ­
              ],
              borderColor: [
                "#ff6384",
                "#36a2eb",
                "#ffcd56",
                "#4bc0c0",
                "#9966ff",
              ],
              // ë§‰ëŒ€ì˜ êµµê¸° ì¡°ì •
              barThickness: 60, // ë§‰ëŒ€ êµµê¸° ì§ì ‘ ì§€ì •
              // maxBarThickness: 20, // ë§‰ëŒ€ì˜ ìµœëŒ€ êµµê¸° ì œí•œ (ì„ íƒì‚¬í•­)
            },
          ],
        },
        options: {
          maintainAspectRatio: false, // ë¹„ìœ¨ì´ ì•„ë‹Œ ë¶€ëª¨ì˜ í¬ê¸°ì— ë§ì¶° í¬ê¸° ì¡°ì •
          plugins: {
            legend: {
              display: false, // ë¼ë²¨ ìˆ¨ê¸°ê¸°
            },
          },
        },
      });

      // 2. íŒŒì´ì°¨íŠ¸ : ë‚¨ë…€ ì„ í˜¸ë„
      // https://waymond.tistory.com/56
      const hoverPieChartCtx = document
        .querySelector("#chart-pie-view")
        .getContext("2d");
      const hoverPieChart = new Chart(hoverPieChartCtx, {
        type: "pie",
        data: {
          labels: ["ë‚¨ì„±", "ì—¬ì„±"],
          datasets: [
            {
              data: [30, 20],
              backgroundColor: ["#9392e8", "#eb989d"],
              borderColor: ["rgba(0, 0, 255, 0.3)", "rgba(255, 0, 0, 0.3)"],
              borderWidth: 1,
              hoverBackgroundColor: ["#9392e8", "#eb989d"],
            },
          ],
        },
        options: {
          plugins: {
            // legend: {
            //   position: "top",
            // },
            // title: {
            //   display: true,
            //   text: "Pie Chart ì„",
            // },
          },
        },
      });
    </script>
  </body>
</html>
